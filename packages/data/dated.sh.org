#!/bin/bash
#################################################################
#                                                               #
# Dated script created by Teqno                                 #
#                                                               #
#--[ Settings ]-------------------------------------------------#

today=`date +%m%d`                      # 1231
tomorrow=`date --date "+1 day" +%m%d`   # 0101
yesterday=`date --date "-1 day" +%m%d`  # 1230
glroot=/glftpd                          # path to glftpd
gllog=$glroot/ftp-data/logs/glftpd.log  # path to glftpd.log
sections="
"

#--[ Script start ]---------------------------------------------#

for section in $sections
do
    [ -d "$glroot/site/$section/$today" ] && continue
    chmod 755 $glroot/site/$section/*
    mkdir -m 777 -p $glroot/site/$section/$today
    echo `date "+%a %b %e %T %Y"` TURDAY: \"$today\" \"$yesterday\" \"$section\" >> $gllog
    rm $glroot/site/!Today_$section
    cd $glroot/site
    ln -s ./$section/$today !Today_$section
    cd ..
done

for section in $sections
do
    [ -d "$glroot/site/$section/$tomorrow" ] && rm -rf $glroot/site/$section/$tomorrow
done

exit 0
